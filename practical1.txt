
BOOT SEQUENCE: bootchart

TARGET: current or desired run state

    systemctl list-units --type target #list all targets

        UNIT                   LOAD   ACTIVE SUB    DESCRIPTION
        basic.target           loaded active active Basic System
        cryptsetup.target      loaded active active Local Encrypted Volumes
        getty.target           loaded active active Login Prompts
        graphical.target       loaded active active Graphical Interface
        local-fs-pre.target    loaded active active Local File Systems (Pre)
        local-fs.target        loaded active active Local File Systems
        multi-user.target      loaded active active Multi-User System
        network.target         loaded active active Network
        nss-user-lookup.target loaded active active User and Group Name Lookups
        paths.target           loaded active active Paths
        remote-fs.target       loaded active active Remote File Systems
        slices.target          loaded active active Slices
        sockets.target         loaded active active Sockets
        swap.target            loaded active active Swap
        sysinit.target         loaded active active System Initialization
        time-set.target        loaded active active System Time Set
        time-sync.target       loaded active active System Time Synchronized
        timers.target          loaded active active Timers

        LOAD   = Reflects whether the unit definition was properly loaded.
        ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
        SUB    = The low-level unit activation state, values depend on unit type.
        18 loaded units listed. Pass --all to see loaded but inactive units, too.
        To show all installed unit files use 'systemctl list-unit-files'.

    systemctl get-default   # show current target
        graphical.targe     # told target
    
    systemctl set-default [target]  # change target
        multi-user.target   # selected target

        Created symlink /etc/systemd/system/default.target → /lib/systemd/system/multi-user.target.


BOOT TIME: after changing the boot target, each reboot takes +-12s:

    systemd-analyze # give boot time
    
    Startup finished in 3.673s (kernel) + 8.594s (userspace) = 12.268s 
    multi-user.target reached after 8.548s in userspace


SERVICES: an application (or set of applications) that runs in the background waiting to be used, or carrying out essential tasks

    systemctl list-units --type=service # show all services

        UNIT                               LOAD   ACTIVE SUB     DESCRIPTION
        apparmor.service                   loaded active exited  Load AppArmor profiles
        avahi-daemon.service               loaded active running Avahi mDNS/DNS-SD Stack
        console-setup.service              loaded active exited  Set console font and keymap
        cron.service                       loaded active running Regular background program processin>
        cups-browsed.service               loaded active running Make remote CUPS printers available >
        cups.service                       loaded active running CUPS Scheduler
        dbus.service                       loaded active running D-Bus System Message Bus
        getty@tty1.service                 loaded active running Getty on tty1
        ifupdown-pre.service               loaded active exited  Helper to synchronize boot up for ifupdown
        keyboard-setup.service             loaded active exited  Set the console keyboard layout
        kmod-static-nodes.service          loaded active exited  Create list of static device nodes for the current kernel
        ModemManager.service               loaded active running Modem Manager
        networking.service                 loaded active exited  Raise network interfaces
        NetworkManager.service             loaded active running Network Manager
        open-vm-tools.service              loaded active running Service for virtual machines hosted on VMware
        plymouth-quit-wait.service         loaded active exited  Hold until boot process finishes up
        plymouth-quit.service              loaded active exited  Terminate Plymouth Boot Screen
        plymouth-read-write.service        loaded active exited  Tell Plymouth To Write Out Runtime Data
        plymouth-start.service             loaded active exited  Show Plymouth Boot Screen
        polkit.service                     loaded active running Authorization Manager
        rsyslog.service                    loaded active running System Logging Service
        rtkit-daemon.service               loaded active running RealtimeKit Scheduling Policy Service
        ssh.service                        loaded active running OpenBSD Secure Shell server
        systemd-journal-flush.service      loaded active exited  Flush Journal to Persistent Storage
        systemd-journald.service           loaded active running Journal Service
        systemd-logind.service             loaded active running User Login Management
        systemd-modules-load.service       loaded active exited  Load Kernel Modules
        systemd-random-seed.service        loaded active exited  Load/Save Random Seed
        systemd-remount-fs.service         loaded active exited  Remount Root and Kernel File Systems
        systemd-sysctl.service             loaded active exited  Apply Kernel Variables
        systemd-sysusers.service           loaded active exited  Create System Users
        systemd-timesyncd.service          loaded active running Network Time Synchronization
        systemd-tmpfiles-setup-dev.service loaded active exited  Create Static Device Nodes in /dev
        systemd-tmpfiles-setup.service     loaded active exited  Create Volatile Files and Directories
        systemd-udev-settle.service        loaded active exited  Wait for udev To Complete Device Initialization
        systemd-udev-trigger.service       loaded active exited  Coldplug All udev Devices
        systemd-udevd.service              loaded active running Rule-based Manager for Device Events and Files
        systemd-update-utmp.service        loaded active exited  Update UTMP about System Boot/Shutdown
        systemd-user-sessions.service      loaded active exited  Permit User Sessions
        udisks2.service                    loaded active running Disk Manager
        unattended-upgrades.service        loaded active running Unattended Upgrades Shutdown
        upower.service                     loaded active running Daemon for power management
        user-runtime-dir@1000.service      loaded active exited  User Runtime Directory /run/user/1000
        user@1000.service                  loaded active running User Manager for UID 1000
        vgauth.service                     loaded active running Authentication service for virtual machines hosted on VMware
        wpa_supplicant.service             loaded active running WPA supplicant

        LOAD   = Reflects whether the unit definition was properly loaded.
        ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
        SUB    = The low-level unit activation state, values depend on unit type.
        46 loaded units listed. Pass --all to see loaded but inactive units, too.
        To show all installed unit files use 'systemctl list-unit-files'.

    
    systemctl list-dependencies     # show general service dependencies

        default.target
        ● ├─anacron.service
        ● ├─avahi-daemon.service
        ● ├─console-setup.service
        ● ├─cron.service
        ● ├─cups-browsed.service
        ● ├─cups.path
        ● ├─dbus.service
        ● ├─e2scrub_reap.service
        ● ├─ModemManager.service
        ● ├─networking.service
        ● ├─NetworkManager.service
        ● ├─open-vm-tools.service
        ● ├─plymouth-quit-wait.service
        ● ├─plymouth-quit.service
        ● ├─rsyslog.service
        ● ├─run-vmblock\x2dfuse.mount
        ● ├─ssa.service
        ● ├─ssh.service
        ● ├─systemd-ask-password-wall.path
        ● ├─systemd-logind.service
        ● ├─systemd-update-utmp-runlevel.service
        ● ├─systemd-user-sessions.service
        ● ├─tpm2-abrmd.service
        ● ├─unattended-upgrades.service
        ● ├─wpa_supplicant.service
        ● ├─basic.target
        ● │ ├─-.mount
        ● │ ├─tmp.mount
        ● │ ├─paths.target
        ● │ ├─slices.target
        ● │ │ ├─-.slice
        ● │ │ └─system.slice
        ● │ ├─sockets.target
        ● │ │ ├─avahi-daemon.socket
        ● │ │ ├─cups.socket
        ● │ │ ├─dbus.socket
        ● │ │ ├─systemd-initctl.socket
        ● │ │ ├─systemd-journald-audit.socket
        ● │ │ ├─systemd-journald-dev-log.socket
        ● │ │ ├─systemd-journald.socket
        ● │ │ ├─systemd-udevd-control.socket
        ● │ │ └─systemd-udevd-kernel.socket
        ● │ ├─sysinit.target
        ● │ │ ├─apparmor.service
        ● │ │ ├─dev-hugepages.mount
        ● │ │ ├─dev-mqueue.mount
        ● │ │ ├─keyboard-setup.service
        ● │ │ ├─kmod-static-nodes.service
        ● │ │ ├─plymouth-read-write.service
        ● │ │ ├─plymouth-start.service
        ● │ │ ├─proc-sys-fs-binfmt_misc.automount
        ● │ │ ├─sys-fs-fuse-connections.mount
        ● │ │ ├─sys-kernel-config.mount
        ● │ │ ├─sys-kernel-debug.mount
        ● │ │ ├─sys-kernel-tracing.mount
        ● │ │ ├─systemd-ask-password-console.path
        ● │ │ ├─systemd-binfmt.service
        ● │ │ ├─systemd-boot-system-token.service
        ● │ │ ├─systemd-hwdb-update.service
        ● │ │ ├─systemd-journal-flush.service
        ● │ │ ├─systemd-journald.service
        ● │ │ ├─systemd-machine-id-commit.service
        ● │ │ ├─systemd-modules-load.service
        ● │ │ ├─systemd-pstore.service
        ● │ │ ├─systemd-random-seed.service
        ● │ │ ├─systemd-sysctl.service
        ● │ │ ├─systemd-sysusers.service
        ● │ │ ├─systemd-timesyncd.service
        ● │ │ ├─systemd-tmpfiles-setup-dev.service
        ● │ │ ├─systemd-tmpfiles-setup.service
        ● │ │ ├─systemd-udev-trigger.service
        ● │ │ ├─systemd-udevd.service
        ● │ │ ├─systemd-update-utmp.service
        ● │ │ ├─cryptsetup.target
        ● │ │ ├─local-fs.target
        ● │ │ │ ├─-.mount
        ● │ │ │ ├─systemd-fsck-root.service
        ● │ │ │ └─systemd-remount-fs.service
        ● │ │ └─swap.target
        ● │ │   └─dev-sda5.swap
        ● │ └─timers.target
        ● │   ├─anacron.timer
        ● │   ├─apt-daily-upgrade.timer
        ● │   ├─apt-daily.timer
        ● │   ├─e2scrub_all.timer
        ● │   ├─fwupd-refresh.timer
        ● │   ├─logrotate.timer
        ● │   ├─man-db.timer
        ● │   └─systemd-tmpfiles-clean.timer
        ● ├─getty.target
        ● │ ├─getty-static.service
        ● │ └─getty@tty1.service
        ● └─remote-fs.target

BOOT TIME II

     systemd-analyze blame  # shows a detailed boot time summary
      
      2.809s dev-sda1.device
      2.565s ifupdown-pre.service
      2.536s NetworkManager.service
      2.480s polkit.service
      2.465s systemd-udev-settle.service
      2.103s apparmor.service
      1.866s avahi-daemon.service
      1.807s wpa_supplicant.service
      1.804s systemd-logind.service
      1.626s networking.service
       903ms systemd-journal-flush.service
       834ms user@1000.service
       772ms systemd-random-seed.service
       702ms systemd-journald.service
       665ms systemd-udevd.service
       663ms cups.service
       630ms ModemManager.service
       586ms systemd-udev-trigger.service
       527ms keyboard-setup.service
       498ms ssh.service
       343ms udisks2.service
       341ms systemd-modules-load.service
       259ms systemd-timesyncd.service
       235ms e2scrub_reap.service
       159ms systemd-sysusers.service
       140ms upower.service
       132ms systemd-tmpfiles-clean.service
       130ms rsyslog.service
       124ms systemd-sysctl.service
       112ms plymouth-start.service
        96ms sys-kernel-debug.mount
        96ms dev-mqueue.mount
        95ms sys-kernel-tracing.mount
        93ms dev-hugepages.mount
        89ms systemd-tmpfiles-setup.service
        89ms systemd-tmpfiles-setup-dev.service
        71ms run-vmblock\x2dfuse.mount
        68ms modprobe@fuse.service
        67ms systemd-remount-fs.service
        65ms dev-sda5.swap
        54ms systemd-user-sessions.service
        51ms sys-kernel-config.mount
        48ms plymouth-read-write.service
        48ms plymouth-quit.service
        45ms console-setup.service
        38ms plymouth-quit-wait.service
        38ms modprobe@configfs.service
        36ms systemd-update-utmp.service
        35ms systemd-update-utmp-runlevel.service
        29ms kmod-static-nodes.service
        28ms modprobe@drm.service
        25ms rtkit-daemon.service
        15ms sys-fs-fuse-connections.mount
        11ms user-runtime-dir@1000.service
         9ms open-vm-tools.service

    bluetooth.service -> bluetooth not needed
        no reverse dependencies

    ModemManager.service -> mobile broadband not needed
    ● └─multi-user.target
    ●   └─graphical.target

    avahi-daemon.service -> finds net resources automatically
    ● ├─cups-browsed.service
    ● └─multi-user.target
    ●   └─graphical.target
 
    display-manager.service -> display manager
    ● └─graphical.target

    NetworkManager.service -> dynamic net 
    ● ├─NetworkManager-wait-online.service
    ● └─multi-user.target
    ●   └─graphical.target

    wpa_supplicant.service -> wireless connection
    ● └─multi-user.target
    ●   └─graphical.target

    apparmor.service
        no reverse dependencies (all protected apps)

    cups.service -> no need for printing
    ● └─cups-browsed.service

BOOT TIME III
    2.514s dev-sda1.device
2.144s ifupdown-pre.service
2.062s apparmor.service
2.020s systemd-udev-settle.service
1.896s NetworkManager.service
1.886s networking.service
1.874s polkit.service
1.692s avahi-daemon.service
1.629s wpa_supplicant.service
1.623s systemd-logind.service
1.299s systemd-journal-flush.service
 901ms systemd-random-seed.service
 756ms systemd-journald.service
 634ms systemd-udev-trigger.service
 530ms user@1000.service
 509ms systemd-udevd.service
 454ms keyboard-setup.service
 426ms udisks2.service
 353ms ModemManager.service
 351ms ssh.service
 272ms e2scrub_reap.service
 267ms systemd-timesyncd.service
 241ms cups.service
 220ms systemd-modules-load.service
 182ms systemd-tmpfiles-setup.service
 148ms plymouth-start.service
 117ms upower.service
 104ms rsyslog.service
  98ms systemd-sysusers.service
  91ms modprobe@fuse.service
  90ms systemd-tmpfiles-setup-dev.service
  81ms systemd-sysctl.service
  79ms dev-mqueue.mount
  78ms dev-hugepages.mount
  78ms sys-kernel-debug.mount
  77ms sys-kernel-tracing.mount
  75ms systemd-update-utmp.service
  73ms run-vmblock\x2dfuse.mount
  64ms systemd-remount-fs.service
  55ms systemd-update-utmp-runlevel.service
  50ms plymouth-quit-wait.service
  46ms modprobe@configfs.service
  46ms kmod-static-nodes.service
  45ms modprobe@drm.service
  44ms dev-sda5.swap
  43ms plymouth-read-write.service
  42ms console-setup.service
  40ms plymouth-quit.service
  29ms systemd-user-sessions.service
  28ms sys-kernel-config.mount
  16ms user-runtime-dir@1000.service
  15ms rtkit-daemon.service
  12ms open-vm-tools.service
  12ms sys-fs-fuse-connections.mount


BOOT TIME IV
    flush takes an increasingly amount of time with each reboot
    given that not all of it is needed, 

systemd-timesyncd -> daemon that synchronizes time through the web


ROUTING TABLE:
    route

    Kernel IP routing table
    Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
    default         _gateway        0.0.0.0         UG    0      0        0 ens33
    10.11.48.0      0.0.0.0         255.255.254.0   U     0      0        0 ens33
    10.11.50.0      0.0.0.0         255.255.254.0   U     0      0        0 ens34
    link-local      0.0.0.0         255.255.0.0     U     1000   0        0 ens33

    ip route add 172.10.1.0/24 via 10.0.0.100 dev eth0 # add a temporary route

RESOURCES: top

l)?
